

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Setting up the development environment &mdash; hyperledger-fabricdocs master documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Building Hyperledger Fabric" href="build.html" />
    <link rel="prev" title="Using Jira to understand current work items" href="../jira_navigation.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          


          
            <a href="../index.html" class="icon icon-home"> hyperledger-fabricdocs
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br><img style="background-color: #fff; height: unset; width: unset;" alt="Hyperledger Fabric" src=../_images/hyperledger_fabric_logo_color.png />
<br>
<a href="https://github.com/hyperledger/fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="GitHub" src="../_static/images/github_button.png"/></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="../_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="../_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="../_static/images/youtube_button.png"/></a>

        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">Hyperledger Fabric v2.0 更新说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html#id7">发行说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_concepts.html">关键概念</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developapps/developing_applications.html">开发应用</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment_guide_overview.html">部署一个生产网络</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops_guide.html">操作指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade.html">升级到最新版本</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_ref.html">命令参考</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">架构参考</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fabric-FAQ.html">常见问题</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../CONTRIBUTING.html">欢迎贡献！</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#id2">贡献的方法</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#linux-foundation">获取 Linux Foundation 账号</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#id6">贡献文档</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#id7">项目治理</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#id15">贡献指南</a></li>
<li class="toctree-l2"><a class="reference internal" href="../CONTRIBUTING.html#id25">法律材料</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../CONTRIBUTING.html#id26">相关主题</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../jira_navigation.html">Using Jira to understand current work items</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Setting up the development environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#steps">Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="#developing-on-windows">Developing on Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id1">Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="build.html">Building Hyperledger Fabric</a></li>
<li class="toctree-l3"><a class="reference internal" href="build.html#configuration">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="build.html#id2">Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../style-guides/go-style.html">Coding guidelines</a></li>
<li class="toctree-l3"><a class="reference internal" href="../style-guides/go-style.html#adding-or-updating-go-packages">Adding or updating Go packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../style-guides/go-style.html#generating-grpc-code">Generating gRPC code</a></li>
<li class="toctree-l3"><a class="reference internal" href="../style-guides/go-style.html#id2">Adding or updating Go packages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">术语表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">版本发布</a></li>
<li class="toctree-l1"><a class="reference internal" href="../questions.html">仍有问题？</a></li>
<li class="toctree-l1"><a class="reference internal" href="../status.html">状态</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hyperledger-fabricdocs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../CONTRIBUTING.html">欢迎贡献！</a> &raquo;</li>
        
      <li>Setting up the development environment</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/dev-setup/devenv.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="setting-up-the-development-environment">
<h1>Setting up the development environment<a class="headerlink" href="#setting-up-the-development-environment" title="Permalink to this headline">¶</a></h1>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Git client, Go, and Docker as described at <a class="reference internal" href="../prereqs.html"><span class="doc">准备阶段</span></a></p></li>
<li><p>(macOS)
<a class="reference external" href="https://itunes.apple.com/us/app/xcode/id497799835?mt=12">Xcode</a>
must be installed</p></li>
<li><p>(macOS) you may need to install gnutar, as macOS comes with bsdtar
as the default, but the build uses some gnutar flags. You can use
Homebrew to install it as follows:</p></li>
<li><p><a class="reference external" href="https://git-scm.com/downloads">Git client</a></p></li>
<li><p><a class="reference external" href="https://golang.org/dl/">Go</a> version 1.14.x</p></li>
<li><p><a class="reference external" href="https://docs.docker.com/get-docker/">Docker</a> version 18.03 or later</p></li>
<li><p>(macOS) <a class="reference external" href="https://developer.apple.com/downloads/">Xcode Command Line Tools</a></p></li>
<li><p><a class="reference external" href="https://github.com/opendnssec/SoftHSMv2">SoftHSM</a></p></li>
<li><p><a class="reference external" href="https://stedolan.github.io/jq/download/">jq</a></p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brew</span> <span class="n">install</span> <span class="n">gnu</span><span class="o">-</span><span class="n">tar</span>
</pre></div>
</div>
</div>
<div class="section" id="steps">
<h2>Steps<a class="headerlink" href="#steps" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>(macOS) If you install gnutar, you should prepend the “gnubin”
directory to the $PATH environment variable with something like:</p></li>
</ul>
<div class="section" id="install-the-prerequisites">
<h3>Install the Prerequisites<a class="headerlink" href="#install-the-prerequisites" title="Permalink to this headline">¶</a></h3>
<p>For macOS, we recommend using <a class="reference external" href="https://brew.sh">Homebrew</a> to manage the
development prereqs. The Xcode command line tools will be installed as part of
the Homebrew installation.</p>
<blockquote>
<div><p>export PATH=/usr/local/opt/gnu-tar/libexec/gnubin:$PATH</p>
</div></blockquote>
<p>Once Homebrew is ready, installing the necessary prerequisites is very easy:</p>
<ul class="simple">
<li><p>(macOS) <a class="reference external" href="https://www.gnu.org/software/libtool/">Libtool</a>. You can use
Homebrew to install it as follows:</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">::</span>
</pre></div>
</div>
<blockquote>
<div><p>brew install git go jq softhsm
brew cask install –appdir=”/Applications” docker</p>
<p>brew install libtool</p>
</div></blockquote>
<p>Docker Desktop must be launched to complete the installation so be sure to open
the application after installing it:</p>
<ul class="simple">
<li><p>(only if using Vagrant) - <a class="reference external" href="https://www.vagrantup.com/">Vagrant</a> -
1.9 or later</p></li>
<li><p>(only if using Vagrant) -
<a class="reference external" href="https://www.virtualbox.org/">VirtualBox</a> - 5.0 or later</p></li>
<li><p>BIOS Enabled Virtualization - Varies based on hardware</p></li>
</ul>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">-</span>  <span class="n">Note</span><span class="p">:</span> <span class="n">The</span> <span class="n">BIOS</span> <span class="n">Enabled</span> <span class="n">Virtualization</span> <span class="n">may</span> <span class="n">be</span> <span class="n">within</span> <span class="n">the</span> <span class="n">CPU</span> <span class="ow">or</span>
</pre></div>
</div>
<blockquote>
<div><p>Security settings of the BIOS</p>
<blockquote>
<div><p>open /Applications/Docker.app</p>
</div></blockquote>
</div></blockquote>
</div>
</div>
<div class="section" id="developing-on-windows">
<h2>Developing on Windows<a class="headerlink" href="#developing-on-windows" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="id1">
<h2>Steps<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>On Windows 10 you should use the native Docker distribution and you
may use the Windows PowerShell. However, for the <code class="docutils literal notranslate"><span class="pre">binaries</span></code>
command to succeed you will still need to have the <code class="docutils literal notranslate"><span class="pre">uname</span></code> command
available. You can get it as part of Git but beware that only the
64bit version is supported.</p>
<div class="section" id="set-your-gopath">
<h3>Set your GOPATH<a class="headerlink" href="#set-your-gopath" title="Permalink to this headline">¶</a></h3>
<p>Before running any <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> commands, run the following commands:</p>
<p>Make sure you have properly setup your Host’s <a class="reference external" href="https://github.com/golang/go/wiki/GOPATH">GOPATH environment
variable</a>. This allows for
both building within the Host and the VM.</p>
<p>In case you installed Go into a different location from the standard one
your Go distribution assumes, make sure that you also set <a class="reference external" href="https://golang.org/doc/install#install">GOROOT
environment variable</a>.</p>
<blockquote>
<div><p>git config –global core.autocrlf false
git config –global core.longpaths true</p>
</div></blockquote>
</div>
<div class="section" id="note-to-windows-users">
<h3>Note to Windows users<a class="headerlink" href="#note-to-windows-users" title="Permalink to this headline">¶</a></h3>
<p>You can check the setting of these parameters with the following commands:</p>
<p>If you are running Windows, before running any <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span></code> commands,
run the following command.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">::</span>
</pre></div>
</div>
<blockquote>
<div><p>git config –get core.autocrlf
git config –get core.longpaths</p>
<p>git config –get core.autocrlf</p>
</div></blockquote>
<p>These need to be <code class="docutils literal notranslate"><span class="pre">false</span></code> and <code class="docutils literal notranslate"><span class="pre">true</span></code> respectively.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">core.autocrlf</span></code> is set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, you must set it to <code class="docutils literal notranslate"><span class="pre">false</span></code> by
running</p>
<p>The <code class="docutils literal notranslate"><span class="pre">curl</span></code> command that comes with Git and Docker Toolbox is old and
does not handle properly the redirect used in
<a class="reference internal" href="../getting_started.html"><span class="doc">入门</span></a>. Make sure you have and use a newer version
which can be downloaded from the <a class="reference external" href="https://curl.haxx.se/download.html">cURL downloads page</a></p>
</div>
<div class="section" id="clone-the-hyperledger-fabric-source">
<h3>Clone the Hyperledger Fabric source<a class="headerlink" href="#clone-the-hyperledger-fabric-source" title="Permalink to this headline">¶</a></h3>
<blockquote>
<div><p>git config –global core.autocrlf false</p>
</div></blockquote>
<p>First navigate to <a class="reference external" href="https://github.com/hyperledger/fabric">https://github.com/hyperledger/fabric</a> and fork the fabric
repository using the fork button in the top-right corner. After forking, clone
the repository.</p>
<p>If you continue with <code class="docutils literal notranslate"><span class="pre">core.autocrlf</span></code> set to <code class="docutils literal notranslate"><span class="pre">true</span></code>, the
<code class="docutils literal notranslate"><span class="pre">vagrant</span> <span class="pre">up</span></code> command will fail with the error:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>``./setup.sh: /bin/bash^M: bad interpreter: No such file or directory``
</pre></div>
</div>
<blockquote>
<div><p>mkdir -p github.com/&lt;your_github_userid&gt;
cd github.com/&lt;your_github_userid&gt;
git clone <a class="reference external" href="https://github.com">https://github.com</a>/&lt;your_github_userid&gt;/fabric</p>
</div></blockquote>
</div>
<div class="section" id="cloning-the-hyperledger-fabric-source">
<h3>Cloning the Hyperledger Fabric source<a class="headerlink" href="#cloning-the-hyperledger-fabric-source" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are running Windows, before cloning the repository, run the following
command:</p>
</div>
<p>First navigate to <a class="reference external" href="https://github.com/hyperledger/fabric">https://github.com/hyperledger/fabric</a> and fork the
fabric repository using the fork button in the top-right corner</p>
<blockquote>
<div></div></blockquote>
<p>Since Hyperledger Fabric is written in <code class="docutils literal notranslate"><span class="pre">Go</span></code>, you’ll need to
clone the forked repository to your $GOPATH/src directory. If your $GOPATH
has multiple path components, then you will want to use the first one.
There’s a little bit of setup needed:</p>
<blockquote>
<div><p>git config –get core.autocrlf</p>
</div></blockquote>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>If ``core.autocrlf`` is set to ``true``, you must set it to ``false`` by
running:

cd $GOPATH/src
mkdir -p github.com/&lt;your_github_userid&gt;
cd github.com/&lt;your_github_userid&gt;
git clone https://github.com/&lt;your_github_userid&gt;/fabric

::

    git config --global core.autocrlf false
</pre></div>
</div>
</div>
<div class="section" id="configure-softhsm">
<h3>Configure SoftHSM<a class="headerlink" href="#configure-softhsm" title="Permalink to this headline">¶</a></h3>
<p>A PKCS #11 cryptographic token implementation is required to run the unit
tests. The PKCS #11 API is used by the bccsp component of Fabric to interact
with hardware security modules (HSMs) that store cryptographic information and
perform cryptographic computations.  For test environments, SoftHSM can be used
to satisfy this requirement.</p>
<p>SoftHSM generally requires additional configuration before it can be used. For
example, the default configuration will attempt to store token data in a system
directory that unprivileged users are unable to write to.</p>
<p>SoftHSM configuration typically involves copying <code class="docutils literal notranslate"><span class="pre">/etc/softhsm2.conf</span></code> to
<code class="docutils literal notranslate"><span class="pre">$HOME/.config/softhsm2/softhsm2.conf</span></code> and changing <code class="docutils literal notranslate"><span class="pre">directories.tokendir</span></code>
to an appropriate location. Please see the man page for <code class="docutils literal notranslate"><span class="pre">softhsm2.conf</span></code> for
details.</p>
<p>After SoftHSM has been configured, the following command can be used to
initialize the token required by the unit tests:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">softhsm2</span><span class="o">-</span><span class="n">util</span> <span class="o">--</span><span class="n">init</span><span class="o">-</span><span class="n">token</span> <span class="o">--</span><span class="n">slot</span> <span class="mi">0</span> <span class="o">--</span><span class="n">label</span> <span class="s2">&quot;ForFabric&quot;</span> <span class="o">--</span><span class="n">so</span><span class="o">-</span><span class="n">pin</span> <span class="mi">1234</span> <span class="o">--</span><span class="n">pin</span> <span class="mi">98765432</span>
</pre></div>
</div>
<p>If tests are unable to locate the libsofthsm2.so library in your environment,
specify the library path, the PIN, and the label of your token in the
appropriate environment variables. For example, on macOS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">PKCS11_LIB</span><span class="o">=</span><span class="s2">&quot;/usr/local/Cellar/softhsm/2.6.1/lib/softhsm/libsofthsm2.so&quot;</span>
<span class="n">export</span> <span class="n">PKCS11_PIN</span><span class="o">=</span><span class="mi">98765432</span>
<span class="n">export</span> <span class="n">PKCS11_LABEL</span><span class="o">=</span><span class="s2">&quot;ForFabric&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="install-the-development-tools">
<h3>Install the development tools<a class="headerlink" href="#install-the-development-tools" title="Permalink to this headline">¶</a></h3>
<p>Once the repository is cloned, you can use <code class="docutils literal notranslate"><span class="pre">make</span></code> to install some of the
tools used in the development environment. By default, these tools will be
installed into <code class="docutils literal notranslate"><span class="pre">$HOME/go/bin</span></code>. Please be sure your <code class="docutils literal notranslate"><span class="pre">PATH</span></code> includes that
directory.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">gotools</span>
</pre></div>
</div>
<p>After installing the tools, the build environment can be verified by running a
few commands.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">basic</span><span class="o">-</span><span class="n">checks</span> <span class="n">integration</span><span class="o">-</span><span class="n">test</span><span class="o">-</span><span class="n">prereqs</span>
<span class="n">ginkgo</span> <span class="o">-</span><span class="n">r</span> <span class="o">./</span><span class="n">integration</span><span class="o">/</span><span class="n">nwo</span>
</pre></div>
</div>
<p>If those commands completely successfully, you’re ready to Go!</p>
<p>If you plan to use the Hyperledger Fabric application SDKs then be sure to check out their prerequisites in the Node.js SDK <a class="reference external" href="https://github.com/hyperledger/fabric-sdk-node#build-and-test">README</a> and Java SDK <a class="reference external" href="https://github.com/hyperledger/fabric-gateway-java/blob/master/README.md">README</a>.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="build.html" class="btn btn-neutral float-right" title="Building Hyperledger Fabric" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../jira_navigation.html" class="btn btn-neutral" title="Using Jira to understand current work items" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Hyperledger 2020.
    <br>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>