

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>&lt;no title&gt; &mdash; hyperledger-fabricdocs master documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="&lt;no title&gt;" href="peerlifecycle.html" />
    <link rel="prev" title="&lt;no title&gt;" href="peercommand.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          


          
            <a href="../index.html" class="icon icon-home"> hyperledger-fabricdocs
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br><img style="background-color: #fff; height: unset; width: unset;" alt="Hyperledger Fabric" src=../_images/hyperledger_fabric_logo_color.png />
<br>
<a href="https://github.com/hyperledger/fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="GitHub" src="../_static/images/github_button.png"/></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="../_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="../_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="../_static/images/youtube_button.png"/></a>

        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">Hyperledger Fabric v2.0 更新说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html#id7">发行说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="../key_concepts.html">关键概念</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="../developapps/developing_applications.html">开发应用</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials.html">教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment_guide_overview.html">部署一个生产网络</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ops_guide.html">操作指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../upgrade.html">升级到最新版本</a></li>
<li class="toctree-l1"><a class="reference internal" href="../command_ref.html">命令参考</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture.html">架构参考</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Fabric-FAQ.html">常见问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">欢迎贡献！</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">术语表</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases.html">版本发布</a></li>
<li class="toctree-l1"><a class="reference internal" href="../questions.html">仍有问题？</a></li>
<li class="toctree-l1"><a class="reference internal" href="../status.html">状态</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hyperledger-fabricdocs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../command_ref.html">命令参考</a> &raquo;</li>
        
      <li>&lt;no title&gt;</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/commands/peerchaincode.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># peer chaincode</p>
<p><a href="#id1"><span class="problematic" id="id2">`</span></a>peer chaincode`命令允许管理员执行与一个节点上运行有关的链码，例如安装，实例化，调用，包装，查询和升级链码。</p>
<p>## 语法</p>
<p><a href="#id3"><span class="problematic" id="id4">`</span></a>peer chaincode`命令有以下子命令：</p>
<blockquote>
<div><ul class="simple">
<li><p>install</p></li>
<li><p>instantiate</p></li>
<li><p>invoke</p></li>
<li><p>list</p></li>
<li><p>package</p></li>
<li><p>query</p></li>
<li><p>signpackage</p></li>
<li><p>upgrade</p></li>
</ul>
</div></blockquote>
<p>不同的子命令选项（安装，实例化）牵涉到与一个peer相关的不同链码操作。例如，用`peer chaincode install`子命令选项在节点上安装一个链码，或者用`peer chaincode query`子命令选项为一节点上账本的当前值查询链码。</p>
<p>本主题将描述每个节点链码子命令以及它们的选项。</p>
<p>## 参数</p>
<p>每个子命令都有一套专门对应各子命令的参数，以及一套涉及到所有`peer chaincode`子命令的全局参数。但并不是所有的子命令都会使用这些参数。比如，<cite>query`子命令就不需要</cite>–orderer`参数。</p>
<p>每个参数都会和与其相关的子命令一起来解析。全局参数包括</p>
<p><a href="#id5"><span class="problematic" id="id6">*</span></a><cite>–cafile &lt;string&gt;</cite></p>
<blockquote>
<div><p>是通往一文件的路径，该文件包含了用于排序端点的PEM编码受信任证书</p>
</div></blockquote>
<p><a href="#id7"><span class="problematic" id="id8">*</span></a><cite>–certfile &lt;string&gt;</cite></p>
<blockquote>
<div><p>是通往一文件的路径，该文件包含了用于和orderer端点进行相互TLS通信的PEM编码X509公钥。</p>
</div></blockquote>
<p><a href="#id9"><span class="problematic" id="id10">*</span></a><cite>–keyfile &lt;string&gt;</cite></p>
<blockquote>
<div><p>是通往一文件的路径，该文件包含了用于和orderer端点进行相互TLS通信的PEM编码私钥</p>
</div></blockquote>
<p><a href="#id11"><span class="problematic" id="id12">*</span></a><cite>-o`or</cite>–orderer &lt;string&gt;`</p>
<blockquote>
<div><p>排序服务端点被指明为`&lt;hostname or IP address&gt;:&lt;port&gt;`</p>
</div></blockquote>
<p><a href="#id13"><span class="problematic" id="id14">*</span></a><cite>–ordererTLSHostnameOverride &lt;string&gt;</cite></p>
<blockquote>
<div><p>验证与orderer的TLS连接时要用到的主机名覆盖</p>
</div></blockquote>
<p><a href="#id15"><span class="problematic" id="id16">*</span></a><cite>–tls</cite></p>
<blockquote>
<div><p>当与orderer端点通信时用TLS</p>
</div></blockquote>
<p><a href="#id17"><span class="problematic" id="id18">*</span></a><cite>–transient &lt;string&gt;</cite></p>
<blockquote>
<div><p>JSON编码中的参数的瞬时映射</p>
</div></blockquote>
<p>## peer chaincode install
<a href="#id19"><span class="problematic" id="id20">``</span></a>`
Install a chaincode on a peer. This installs a chaincode deployment spec package (if provided) or packages the specified chaincode before subsequently installing it.</p>
<dl>
<dt>Usage:</dt><dd><p>peer chaincode install [flags]</p>
</dd>
<dt>Flags:</dt><dd><blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">--connectionProfile <var>string</var></span></kbd></dt>
<dd><p>Connection profile that provides the necessary connection information for the network. Note: currently only supported for providing peer connection information</p>
</dd>
</dl>
</div></blockquote>
<dl class="option-list">
<dt><kbd><span class="option">-c</span>, <span class="option">--ctor <var>string</var></span></kbd></dt>
<dd><p>Constructor message for the chaincode in JSON format (default “{}”)</p>
</dd>
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>help for install</p>
</dd>
<dt><kbd><span class="option">-l</span>, <span class="option">--lang <var>string</var></span></kbd></dt>
<dd><p>Language the chaincode is written in (default “golang”)</p>
</dd>
<dt><kbd><span class="option">-n</span>, <span class="option">--name <var>string</var></span></kbd></dt>
<dd><p>Name of the chaincode</p>
</dd>
<dt><kbd><span class="option">-p</span>, <span class="option">--path <var>string</var></span></kbd></dt>
<dd><p>Path to chaincode
–peerAddresses stringArray      The addresses of the peers to connect to
–tlsRootCertFiles stringArray   If TLS is enabled, the paths to the TLS root cert files of the peers to connect to. The order and number of certs specified should match the –peerAddresses flag</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--version <var>string</var></span></kbd></dt>
<dd><p>Version of the chaincode specified in install/instantiate/upgrade commands</p>
</dd>
</dl>
</dd>
<dt>Global Flags:</dt><dd><blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">--cafile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint</p>
</dd>
<dt><kbd><span class="option">--certfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--clientauth</span></kbd></dt>
<dd><p>Use mutual TLS when communicating with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--connTimeout <var>duration</var></span></kbd></dt>
<dd><p>Timeout for client to connect (default 3s)</p>
</dd>
<dt><kbd><span class="option">--keyfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
</dl>
</div></blockquote>
<dl class="option-list">
<dt><kbd><span class="option">-o</span>, <span class="option">--orderer <var>string</var></span></kbd></dt>
<dd><p>Ordering service endpoint
–ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
–tls                                 Use TLS when communicating with the orderer endpoint
–transient string                    Transient map of arguments in JSON encoding</p>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a></p>
<p>## peer chaincode instantiate
<a href="#id25"><span class="problematic" id="id26">``</span></a>`
Deploy the specified chaincode to the network.</p>
<dl>
<dt>Usage:</dt><dd><p>peer chaincode instantiate [flags]</p>
</dd>
<dt>Flags:</dt><dd><dl class="option-list">
<dt><kbd><span class="option">-C</span>, <span class="option">--channelID <var>string</var></span></kbd></dt>
<dd><p>The channel on which this command should be executed
–collections-config string      The fully qualified path to the collection JSON file including the file name
–connectionProfile string       Connection profile that provides the necessary connection information for the network. Note: currently only supported for providing peer connection information</p>
</dd>
<dt><kbd><span class="option">-c</span>, <span class="option">--ctor <var>string</var></span></kbd></dt>
<dd><p>Constructor message for the chaincode in JSON format (default “{}”)</p>
</dd>
<dt><kbd><span class="option">-E</span>, <span class="option">--escc <var>string</var></span></kbd></dt>
<dd><p>The name of the endorsement system chaincode to be used for this chaincode</p>
</dd>
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>help for instantiate</p>
</dd>
<dt><kbd><span class="option">-l</span>, <span class="option">--lang <var>string</var></span></kbd></dt>
<dd><p>Language the chaincode is written in (default “golang”)</p>
</dd>
<dt><kbd><span class="option">-n</span>, <span class="option">--name <var>string</var></span></kbd></dt>
<dd><p>Name of the chaincode
–peerAddresses stringArray      The addresses of the peers to connect to</p>
</dd>
<dt><kbd><span class="option">-P</span>, <span class="option">--policy <var>string</var></span></kbd></dt>
<dd><p>The endorsement policy associated to this chaincode
–tlsRootCertFiles stringArray   If TLS is enabled, the paths to the TLS root cert files of the peers to connect to. The order and number of certs specified should match the –peerAddresses flag</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--version <var>string</var></span></kbd></dt>
<dd><p>Version of the chaincode specified in install/instantiate/upgrade commands</p>
</dd>
<dt><kbd><span class="option">-V</span>, <span class="option">--vscc <var>string</var></span></kbd></dt>
<dd><p>The name of the verification system chaincode to be used for this chaincode</p>
</dd>
</dl>
</dd>
<dt>Global Flags:</dt><dd><blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">--cafile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint</p>
</dd>
<dt><kbd><span class="option">--certfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--clientauth</span></kbd></dt>
<dd><p>Use mutual TLS when communicating with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--connTimeout <var>duration</var></span></kbd></dt>
<dd><p>Timeout for client to connect (default 3s)</p>
</dd>
<dt><kbd><span class="option">--keyfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
</dl>
</div></blockquote>
<dl class="option-list">
<dt><kbd><span class="option">-o</span>, <span class="option">--orderer <var>string</var></span></kbd></dt>
<dd><p>Ordering service endpoint
–ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
–tls                                 Use TLS when communicating with the orderer endpoint
–transient string                    Transient map of arguments in JSON encoding</p>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id27"><span class="problematic" id="id28">``</span></a><a href="#id29"><span class="problematic" id="id30">`</span></a></p>
<p>## peer chaincode invoke
<a href="#id31"><span class="problematic" id="id32">``</span></a>`
Invoke the specified chaincode. It will try to commit the endorsed transaction to the network.</p>
<dl>
<dt>Usage:</dt><dd><p>peer chaincode invoke [flags]</p>
</dd>
<dt>Flags:</dt><dd><dl class="option-list">
<dt><kbd><span class="option">-C</span>, <span class="option">--channelID <var>string</var></span></kbd></dt>
<dd><p>The channel on which this command should be executed
–connectionProfile string       Connection profile that provides the necessary connection information for the network. Note: currently only supported for providing peer connection information</p>
</dd>
<dt><kbd><span class="option">-c</span>, <span class="option">--ctor <var>string</var></span></kbd></dt>
<dd><p>Constructor message for the chaincode in JSON format (default “{}”)</p>
</dd>
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>help for invoke</p>
</dd>
<dt><kbd><span class="option">-I</span>, <span class="option">--isInit</span></kbd></dt>
<dd><p>Is this invocation for init (useful for supporting legacy chaincodes in the new lifecycle)</p>
</dd>
<dt><kbd><span class="option">-n</span>, <span class="option">--name <var>string</var></span></kbd></dt>
<dd><p>Name of the chaincode
–peerAddresses stringArray      The addresses of the peers to connect to
–tlsRootCertFiles stringArray   If TLS is enabled, the paths to the TLS root cert files of the peers to connect to. The order and number of certs specified should match the –peerAddresses flag
–waitForEvent                   Whether to wait for the event from each peer’s deliver filtered service signifying that the ‘invoke’ transaction has been committed successfully
–waitForEventTimeout duration   Time to wait for the event from each peer’s deliver filtered service signifying that the ‘invoke’ transaction has been committed successfully (default 30s)</p>
</dd>
</dl>
</dd>
<dt>Global Flags:</dt><dd><blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">--cafile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint</p>
</dd>
<dt><kbd><span class="option">--certfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--clientauth</span></kbd></dt>
<dd><p>Use mutual TLS when communicating with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--connTimeout <var>duration</var></span></kbd></dt>
<dd><p>Timeout for client to connect (default 3s)</p>
</dd>
<dt><kbd><span class="option">--keyfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
</dl>
</div></blockquote>
<dl class="option-list">
<dt><kbd><span class="option">-o</span>, <span class="option">--orderer <var>string</var></span></kbd></dt>
<dd><p>Ordering service endpoint
–ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
–tls                                 Use TLS when communicating with the orderer endpoint
–transient string                    Transient map of arguments in JSON encoding</p>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id33"><span class="problematic" id="id34">``</span></a><a href="#id35"><span class="problematic" id="id36">`</span></a></p>
<p>## peer chaincode list
<a href="#id37"><span class="problematic" id="id38">``</span></a>`
Get the instantiated chaincodes in the channel if specify channel, or get installed chaincodes on the peer</p>
<dl>
<dt>Usage:</dt><dd><p>peer chaincode list [flags]</p>
</dd>
<dt>Flags:</dt><dd><dl class="option-list">
<dt><kbd><span class="option">-C</span>, <span class="option">--channelID <var>string</var></span></kbd></dt>
<dd><p>The channel on which this command should be executed
–connectionProfile string       Connection profile that provides the necessary connection information for the network. Note: currently only supported for providing peer connection information</p>
</dd>
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>help for list
–installed                      Get the installed chaincodes on a peer
–instantiated                   Get the instantiated chaincodes on a channel
–peerAddresses stringArray      The addresses of the peers to connect to
–tlsRootCertFiles stringArray   If TLS is enabled, the paths to the TLS root cert files of the peers to connect to. The order and number of certs specified should match the –peerAddresses flag</p>
</dd>
</dl>
</dd>
<dt>Global Flags:</dt><dd><blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">--cafile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint</p>
</dd>
<dt><kbd><span class="option">--certfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--clientauth</span></kbd></dt>
<dd><p>Use mutual TLS when communicating with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--connTimeout <var>duration</var></span></kbd></dt>
<dd><p>Timeout for client to connect (default 3s)</p>
</dd>
<dt><kbd><span class="option">--keyfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
</dl>
</div></blockquote>
<dl class="option-list">
<dt><kbd><span class="option">-o</span>, <span class="option">--orderer <var>string</var></span></kbd></dt>
<dd><p>Ordering service endpoint
–ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
–tls                                 Use TLS when communicating with the orderer endpoint
–transient string                    Transient map of arguments in JSON encoding</p>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id39"><span class="problematic" id="id40">``</span></a><a href="#id41"><span class="problematic" id="id42">`</span></a></p>
<p>## peer chaincode package
<a href="#id43"><span class="problematic" id="id44">``</span></a>`
Package a chaincode and write the package to a file.</p>
<dl>
<dt>Usage:</dt><dd><p>peer chaincode package [outputfile] [flags]</p>
</dd>
<dt>Flags:</dt><dd><dl class="option-list">
<dt><kbd><span class="option">-s</span>, <span class="option">--cc-package</span></kbd></dt>
<dd><p>create CC deployment spec for owner endorsements instead of raw CC deployment spec</p>
</dd>
<dt><kbd><span class="option">-c</span>, <span class="option">--ctor <var>string</var></span></kbd></dt>
<dd><p>Constructor message for the chaincode in JSON format (default “{}”)</p>
</dd>
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>help for package</p>
</dd>
<dt><kbd><span class="option">-i</span>, <span class="option">--instantiate-policy <var>string</var></span></kbd></dt>
<dd><p>instantiation policy for the chaincode</p>
</dd>
<dt><kbd><span class="option">-l</span>, <span class="option">--lang <var>string</var></span></kbd></dt>
<dd><p>Language the chaincode is written in (default “golang”)</p>
</dd>
<dt><kbd><span class="option">-n</span>, <span class="option">--name <var>string</var></span></kbd></dt>
<dd><p>Name of the chaincode</p>
</dd>
<dt><kbd><span class="option">-p</span>, <span class="option">--path <var>string</var></span></kbd></dt>
<dd><p>Path to chaincode</p>
</dd>
<dt><kbd><span class="option">-S</span>, <span class="option">--sign</span></kbd></dt>
<dd><p>if creating CC deployment spec package for owner endorsements, also sign it with local MSP</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--version <var>string</var></span></kbd></dt>
<dd><p>Version of the chaincode specified in install/instantiate/upgrade commands</p>
</dd>
</dl>
</dd>
<dt>Global Flags:</dt><dd><blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">--cafile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint</p>
</dd>
<dt><kbd><span class="option">--certfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--clientauth</span></kbd></dt>
<dd><p>Use mutual TLS when communicating with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--connTimeout <var>duration</var></span></kbd></dt>
<dd><p>Timeout for client to connect (default 3s)</p>
</dd>
<dt><kbd><span class="option">--keyfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
</dl>
</div></blockquote>
<dl class="option-list">
<dt><kbd><span class="option">-o</span>, <span class="option">--orderer <var>string</var></span></kbd></dt>
<dd><p>Ordering service endpoint
–ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
–tls                                 Use TLS when communicating with the orderer endpoint
–transient string                    Transient map of arguments in JSON encoding</p>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id45"><span class="problematic" id="id46">``</span></a><a href="#id47"><span class="problematic" id="id48">`</span></a></p>
<p>## peer chaincode query
<a href="#id49"><span class="problematic" id="id50">``</span></a>`
Get endorsed result of chaincode function call and print it. It won’t generate transaction.</p>
<dl>
<dt>Usage:</dt><dd><p>peer chaincode query [flags]</p>
</dd>
<dt>Flags:</dt><dd><dl class="option-list">
<dt><kbd><span class="option">-C</span>, <span class="option">--channelID <var>string</var></span></kbd></dt>
<dd><p>The channel on which this command should be executed
–connectionProfile string       Connection profile that provides the necessary connection information for the network. Note: currently only supported for providing peer connection information</p>
</dd>
<dt><kbd><span class="option">-c</span>, <span class="option">--ctor <var>string</var></span></kbd></dt>
<dd><p>Constructor message for the chaincode in JSON format (default “{}”)</p>
</dd>
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>help for query</p>
</dd>
<dt><kbd><span class="option">-x</span>, <span class="option">--hex</span></kbd></dt>
<dd><p>If true, output the query value byte array in hexadecimal. Incompatible with –raw</p>
</dd>
<dt><kbd><span class="option">-n</span>, <span class="option">--name <var>string</var></span></kbd></dt>
<dd><p>Name of the chaincode
–peerAddresses stringArray      The addresses of the peers to connect to</p>
</dd>
<dt><kbd><span class="option">-r</span>, <span class="option">--raw</span></kbd></dt>
<dd><p>If true, output the query value as raw bytes, otherwise format as a printable string
–tlsRootCertFiles stringArray   If TLS is enabled, the paths to the TLS root cert files of the peers to connect to. The order and number of certs specified should match the –peerAddresses flag</p>
</dd>
</dl>
</dd>
<dt>Global Flags:</dt><dd><blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">--cafile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint</p>
</dd>
<dt><kbd><span class="option">--certfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--clientauth</span></kbd></dt>
<dd><p>Use mutual TLS when communicating with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--connTimeout <var>duration</var></span></kbd></dt>
<dd><p>Timeout for client to connect (default 3s)</p>
</dd>
<dt><kbd><span class="option">--keyfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
</dl>
</div></blockquote>
<dl class="option-list">
<dt><kbd><span class="option">-o</span>, <span class="option">--orderer <var>string</var></span></kbd></dt>
<dd><p>Ordering service endpoint
–ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
–tls                                 Use TLS when communicating with the orderer endpoint
–transient string                    Transient map of arguments in JSON encoding</p>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id51"><span class="problematic" id="id52">``</span></a><a href="#id53"><span class="problematic" id="id54">`</span></a></p>
<p>## peer chaincode signpackage
<a href="#id55"><span class="problematic" id="id56">``</span></a>`
Sign the specified chaincode package</p>
<dl>
<dt>Usage:</dt><dd><p>peer chaincode signpackage [flags]</p>
</dd>
<dt>Flags:</dt><dd><dl class="option-list">
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>help for signpackage</p>
</dd>
</dl>
</dd>
<dt>Global Flags:</dt><dd><blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">--cafile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint</p>
</dd>
<dt><kbd><span class="option">--certfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--clientauth</span></kbd></dt>
<dd><p>Use mutual TLS when communicating with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--connTimeout <var>duration</var></span></kbd></dt>
<dd><p>Timeout for client to connect (default 3s)</p>
</dd>
<dt><kbd><span class="option">--keyfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
</dl>
</div></blockquote>
<dl class="option-list">
<dt><kbd><span class="option">-o</span>, <span class="option">--orderer <var>string</var></span></kbd></dt>
<dd><p>Ordering service endpoint
–ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
–tls                                 Use TLS when communicating with the orderer endpoint
–transient string                    Transient map of arguments in JSON encoding</p>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id57"><span class="problematic" id="id58">``</span></a><a href="#id59"><span class="problematic" id="id60">`</span></a></p>
<p>## peer chaincode upgrade
<a href="#id61"><span class="problematic" id="id62">``</span></a>`
Upgrade an existing chaincode with the specified one. The new chaincode will immediately replace the existing chaincode upon the transaction committed.</p>
<dl>
<dt>Usage:</dt><dd><p>peer chaincode upgrade [flags]</p>
</dd>
<dt>Flags:</dt><dd><dl class="option-list">
<dt><kbd><span class="option">-C</span>, <span class="option">--channelID <var>string</var></span></kbd></dt>
<dd><p>The channel on which this command should be executed
–collections-config string      The fully qualified path to the collection JSON file including the file name
–connectionProfile string       Connection profile that provides the necessary connection information for the network. Note: currently only supported for providing peer connection information</p>
</dd>
<dt><kbd><span class="option">-c</span>, <span class="option">--ctor <var>string</var></span></kbd></dt>
<dd><p>Constructor message for the chaincode in JSON format (default “{}”)</p>
</dd>
<dt><kbd><span class="option">-E</span>, <span class="option">--escc <var>string</var></span></kbd></dt>
<dd><p>The name of the endorsement system chaincode to be used for this chaincode</p>
</dd>
<dt><kbd><span class="option">-h</span>, <span class="option">--help</span></kbd></dt>
<dd><p>help for upgrade</p>
</dd>
<dt><kbd><span class="option">-l</span>, <span class="option">--lang <var>string</var></span></kbd></dt>
<dd><p>Language the chaincode is written in (default “golang”)</p>
</dd>
<dt><kbd><span class="option">-n</span>, <span class="option">--name <var>string</var></span></kbd></dt>
<dd><p>Name of the chaincode</p>
</dd>
<dt><kbd><span class="option">-p</span>, <span class="option">--path <var>string</var></span></kbd></dt>
<dd><p>Path to chaincode
–peerAddresses stringArray      The addresses of the peers to connect to</p>
</dd>
<dt><kbd><span class="option">-P</span>, <span class="option">--policy <var>string</var></span></kbd></dt>
<dd><p>The endorsement policy associated to this chaincode
–tlsRootCertFiles stringArray   If TLS is enabled, the paths to the TLS root cert files of the peers to connect to. The order and number of certs specified should match the –peerAddresses flag</p>
</dd>
<dt><kbd><span class="option">-v</span>, <span class="option">--version <var>string</var></span></kbd></dt>
<dd><p>Version of the chaincode specified in install/instantiate/upgrade commands</p>
</dd>
<dt><kbd><span class="option">-V</span>, <span class="option">--vscc <var>string</var></span></kbd></dt>
<dd><p>The name of the verification system chaincode to be used for this chaincode</p>
</dd>
</dl>
</dd>
<dt>Global Flags:</dt><dd><blockquote>
<div><dl class="option-list">
<dt><kbd><span class="option">--cafile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded trusted certificate(s) for the ordering endpoint</p>
</dd>
<dt><kbd><span class="option">--certfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded X509 public key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--clientauth</span></kbd></dt>
<dd><p>Use mutual TLS when communicating with the orderer endpoint</p>
</dd>
<dt><kbd><span class="option">--connTimeout <var>duration</var></span></kbd></dt>
<dd><p>Timeout for client to connect (default 3s)</p>
</dd>
<dt><kbd><span class="option">--keyfile <var>string</var></span></kbd></dt>
<dd><p>Path to file containing PEM-encoded private key to use for mutual TLS communication with the orderer endpoint</p>
</dd>
</dl>
</div></blockquote>
<dl class="option-list">
<dt><kbd><span class="option">-o</span>, <span class="option">--orderer <var>string</var></span></kbd></dt>
<dd><p>Ordering service endpoint
–ordererTLSHostnameOverride string   The hostname override to use when validating the TLS connection to the orderer.
–tls                                 Use TLS when communicating with the orderer endpoint
–transient string                    Transient map of arguments in JSON encoding</p>
</dd>
</dl>
</dd>
</dl>
<p><a href="#id63"><span class="problematic" id="id64">``</span></a><a href="#id65"><span class="problematic" id="id66">`</span></a></p>
<p>## 使用示例</p>
<p>### peer chaincode instantiate 示例</p>
<p>以下是`peer chaincode instantiate`命令的一些例子，它们在`1.0`版本中`mychannel`通道上将名为`mycc`的链码实例化：</p>
<ul>
<li><p>用`–tls`和`–cafile`全局变量来对网络中的链码实例化，其中TLS被启用：</p>
<blockquote>
<div><dl>
<dt><a href="#id67"><span class="problematic" id="id68">``</span></a><a href="#id69"><span class="problematic" id="id70">`</span></a></dt><dd><p>export ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
peer chaincode instantiate -o orderer.example.com:7050 –tls –cafile $ORDERER_CA -C mychannel -n mycc -v 1.0 -c ‘{“Args”:[“init”,”a”,”100”,”b”,”200”]}’ -P “AND (‘Org1MSP.peer’,’Org2MSP.peer’)”</p>
<p>2018-02-22 16:33:53.324 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 001 Using default escc
2018-02-22 16:33:53.324 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 002 Using default vscc
2018-02-22 16:34:08.698 UTC [main] main -&gt; INFO 003 Exiting…..</p>
</dd>
</dl>
<p><a href="#id71"><span class="problematic" id="id72">``</span></a><a href="#id73"><span class="problematic" id="id74">`</span></a></p>
</div></blockquote>
</li>
<li><p>仅用命令专门选项来将网络中的链码实例化，其中TLS未被启用：</p>
<blockquote>
<div><dl>
<dt><a href="#id75"><span class="problematic" id="id76">``</span></a><a href="#id77"><span class="problematic" id="id78">`</span></a></dt><dd><p>peer chaincode instantiate -o orderer.example.com:7050 -C mychannel -n mycc -v 1.0 -c ‘{“Args”:[“init”,”a”,”100”,”b”,”200”]}’ -P “AND (‘Org1MSP.peer’,’Org2MSP.peer’)”</p>
<p>2018-02-22 16:34:09.324 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 001 Using default escc
2018-02-22 16:34:09.324 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 002 Using default vscc
2018-02-22 16:34:24.698 UTC [main] main -&gt; INFO 003 Exiting…..</p>
</dd>
</dl>
<p><a href="#id79"><span class="problematic" id="id80">``</span></a><a href="#id81"><span class="problematic" id="id82">`</span></a></p>
</div></blockquote>
</li>
</ul>
<p>### peer chaincode invoke 示例</p>
<p>以下是`peer chaincode invoke`命令的一个范例：</p>
<ul>
<li><p>调用版本`1.0`名为`mycc`的链码，该链码位于`peer0.org1.example.com:7051`和`peer0.org2.example.com:9051`（节点由 –peerAddresses 上的通道`mychannel`中，请求从变量`a`中转移10个单位到变量`b`中：</p>
<blockquote>
<div><dl>
<dt><a href="#id83"><span class="problematic" id="id84">``</span></a><a href="#id85"><span class="problematic" id="id86">`</span></a></dt><dd><p>peer chaincode invoke -o orderer.example.com:7050 -C mychannel -n mycc –peerAddresses peer0.org1.example.com:7051 –peerAddresses peer0.org2.example.com:9051 -c ‘{“Args”:[“invoke”,”a”,”b”,”10”]}’</p>
<p>2018-02-22 16:34:27.069 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 001 Using default escc
2018-02-22 16:34:27.069 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 002 Using default vscc
.
.
.
2018-02-22 16:34:27.106 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; DEBU 00a ESCC invoke result: version:1 response:&lt;status:200 message:”OK” &gt; payload:”n 237mM376? [214002 332204035275q2272132An204&amp;2106037W|346#3413274022YnE022024n004lscc022014nnn004mycc022002010003022-n004mycc022%n007n001a022002010003n007n001b022002010003032007n001a03200290032010n001b032003210032003010310001&quot;013022004mycc0320031.0” endorsement:&lt;endorser:”n007Org1MSP022262006—–BEGIN CERTIFICATE—–nMIICLjCCAdWgAwIBAgIRAJYomxY2cqHA/fbRnH5a/bwwCgYIKoZIzj0EAwIwczELnMAkGA1UEBhMCVVMxEzARBgNVBAgTCkNhbGlmb3JuaWExFjAUBgNVBAcTDVNhbiBGncmFuY2lzY28xGTAXBgNVBAoTEG9yZzEuZXhhbXBsZS5jb20xHDAaBgNVBAMTE2NhnLm9yZzEuZXhhbXBsZS5jb20wHhcNMTgwMjIyMTYyODE0WhcNMjgwMjIwMTYyODE0nWjBwMQswCQYDVQQGEwJVUzETMBEGA1UECBMKQ2FsaWZvcm5pYTEWMBQGA1UEBxMNnU2FuIEZyYW5jaXNjbzETMBEGA1UECxMKRmFicmljUGVlcjEfMB0GA1UEAxMWcGVlncjAub3JnMS5leGFtcGxlLmNvbTBZMBMGByqGSM49AgEGCCqGSM49AwEHA0IABDEanWNNniN3qOCQL89BGWfY39f5V3o1pi//7JFDHATJXtLgJhkK5KosDdHuKLYbCqvgen46u3AC16MZyJRvKBiw6jTTBLMA4GA1UdDwEB/wQEAwIHgDAMBgNVHRMBAf8EAjAAnMCsGA1UdIwQkMCKAIN7dJR9dimkFtkus0R5pAOlRz5SA3FB5t8Eaxl9A7lkgMAoGnCCqGSM49BAMCA0cAMEQCIC2DAsO9QZzQmKi8OOKwcCh9Gd01YmWIN3oVmaCRr8C7nAiAlQffq2JFlbh6OWURGOko6RckizG8oVOldZG/Xj3C8lA==n—–END CERTIFICATE—–n” signature:”0D002 022_342350344231G&amp;237n244375302J220l302345210335D250y253P0214:221e332&#64;002 000254361224247210214L277370222213217301r341v227265277336256^217336005y*321023025367” &gt;
2018-02-22 16:34:27.107 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 00b Chaincode invoke successful. result: status:200
2018-02-22 16:34:27.107 UTC [main] main -&gt; INFO 00c Exiting…..</p>
</dd>
</dl>
<p><a href="#id87"><span class="problematic" id="id88">``</span></a><a href="#id89"><span class="problematic" id="id90">`</span></a></p>
</div></blockquote>
</li>
</ul>
<p>现在你就能看到该调用在日志信息的基础上被成功上传了：</p>
<blockquote>
<div><dl class="simple">
<dt><a href="#id91"><span class="problematic" id="id92">``</span></a><a href="#id93"><span class="problematic" id="id94">`</span></a></dt><dd><p>2018-02-22 16:34:27.107 UTC [chaincodeCmd] chaincodeInvokeOrQuery -&gt; INFO 00b Chaincode invoke successful. result: status:200</p>
</dd>
</dl>
<p><a href="#id95"><span class="problematic" id="id96">``</span></a><a href="#id97"><span class="problematic" id="id98">`</span></a></p>
</div></blockquote>
<p>一个成功的回复反映了该交易被成功提交至排序服务。随后，该交易会被添加至区块中，最后，接受通道上每个节点的验证，若不通过则被视为无效。</p>
<p>### peer chaincode list 示例</p>
<p>以下是`peer chaincode list`命令的一些例子：</p>
<ul>
<li><p>用`–installed`flag来对安装在节点上的链码进行列表。</p>
<blockquote>
<div><dl>
<dt><a href="#id99"><span class="problematic" id="id100">``</span></a><a href="#id101"><span class="problematic" id="id102">`</span></a></dt><dd><p>peer chaincode list –installed</p>
<p>Get installed chaincodes on peer:
Name: mycc, Version: 1.0, Path: github.com/hyperledger/fabric-samples/chaincode/abstore/go, Id: 8cc2730fdafd0b28ef734eac12b29df5fc98ad98bdb1b7e0ef96265c3d893d61
2018-02-22 17:07:13.476 UTC [main] main -&gt; INFO 001 Exiting…..</p>
</dd>
</dl>
<p><a href="#id103"><span class="problematic" id="id104">``</span></a><a href="#id105"><span class="problematic" id="id106">`</span></a></p>
</div></blockquote>
<p>可以看到该节点安装了一个名为`mycc`的链码，它是版本`1.0`的。</p>
</li>
<li><p>用`–instantiated`和`-C`（通道ID）flag一起来对通道上被实例化的链码进行列表。</p>
<blockquote>
<div><dl>
<dt><a href="#id107"><span class="problematic" id="id108">``</span></a><a href="#id109"><span class="problematic" id="id110">`</span></a></dt><dd><p>peer chaincode list –instantiated -C mychannel</p>
<p>Get instantiated chaincodes on channel mychannel:
Name: mycc, Version: 1.0, Path: github.com/hyperledger/fabric-samples/chaincode/abstore/go, Escc: escc, Vscc: vscc
2018-02-22 17:07:42.969 UTC [main] main -&gt; INFO 001 Exiting…..</p>
</dd>
</dl>
<p><a href="#id111"><span class="problematic" id="id112">``</span></a><a href="#id113"><span class="problematic" id="id114">`</span></a></p>
</div></blockquote>
<p>现在你能看到版本`1.0`的链码`mycc`被在`mychannel`通道上实例化了。</p>
</li>
</ul>
<p>### peer chaincode package 示例</p>
<p>以下是`peer chaincode package`命令的一个例子，它打包了版本为`1.0`名为`mycc`的链码，生成了链码部署规定，用本地MSP签署了该包装，同时还将其输出为`ccpack.out`：</p>
<blockquote>
<div><dl>
<dt><a href="#id115"><span class="problematic" id="id116">``</span></a><a href="#id117"><span class="problematic" id="id118">`</span></a></dt><dd><blockquote>
<div><p>peer chaincode package ccpack.out -n mycc -p github.com/hyperledger/fabric-samples/chaincode/abstore/go -v 1.1 -s -S
.
.
.
2018-02-22 17:27:01.404 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc
2018-02-22 17:27:01.405 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc
.
.
.
2018-02-22 17:27:01.879 UTC [chaincodeCmd] chaincodePackage -&gt; DEBU 011 Packaged chaincode into deployment spec of size &lt;3426&gt;, with args = [ccpack.out]
2018-02-22 17:27:01.879 UTC [main] main -&gt; INFO 012 Exiting…..</p>
</div></blockquote>
<p><a href="#id119"><span class="problematic" id="id120">``</span></a><a href="#id121"><span class="problematic" id="id122">`</span></a></p>
</dd>
</dl>
</div></blockquote>
<p>### peer chaincode query 示例</p>
<p>以下是`peer chaincode query`命令的示例，该命令在节点账本上查询版本`1.0`名为`mycc`的链码，查询变量`a`的值：</p>
<ul>
<li><p>从输出中可看出变量`a`在查询时有一个值是90。</p>
<blockquote>
<div><dl>
<dt><a href="#id123"><span class="problematic" id="id124">``</span></a><a href="#id125"><span class="problematic" id="id126">`</span></a></dt><dd><p>peer chaincode query -C mychannel -n mycc -c ‘{“Args”:[“query”,”a”]}’</p>
<p>2018-02-22 16:34:30.816 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 001 Using default escc
2018-02-22 16:34:30.816 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 002 Using default vscc
Query Result: 90</p>
</dd>
</dl>
<p><a href="#id127"><span class="problematic" id="id128">``</span></a><a href="#id129"><span class="problematic" id="id130">`</span></a></p>
</div></blockquote>
</li>
</ul>
<p>### peer chaincode signpackage 示例</p>
<p>以下是`peer chaincode signpackage`命令的示例，它接受了现存的签名包，还创建了一个新的签名包，上面有本地MSP追加的一个签名。</p>
<blockquote>
<div><dl class="simple">
<dt><a href="#id131"><span class="problematic" id="id132">``</span></a><a href="#id133"><span class="problematic" id="id134">`</span></a></dt><dd><p>peer chaincode signpackage ccwith1sig.pak ccwith2sig.pak
Wrote signed package to ccwith2sig.pak successfully
2018-02-24 19:32:47.189 EST [main] main -&gt; INFO 002 Exiting…..</p>
</dd>
</dl>
<p><a href="#id135"><span class="problematic" id="id136">``</span></a><a href="#id137"><span class="problematic" id="id138">`</span></a></p>
</div></blockquote>
<p>### peer chaincode upgrade 示例</p>
<p>以下是`peer chaincode upgrade`命令的示例，它在通道`mychannel`上将版本`1.1`名为`mycc`的链码升级成版本`1.2`，其中包含了一个新的变量`c`：</p>
<ul>
<li><p>启用TLS，用`–tls`和`–cafile`global flags来升级网络中的链码：</p>
<blockquote>
<div><dl class="simple">
<dt><a href="#id139"><span class="problematic" id="id140">``</span></a><a href="#id141"><span class="problematic" id="id142">`</span></a></dt><dd><p>export ORDERER_CA=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
peer chaincode upgrade -o orderer.example.com:7050 –tls –cafile $ORDERER_CA -C mychannel -n mycc -v 1.2 -c ‘{“Args”:[“init”,”a”,”100”,”b”,”200”,”c”,”300”]}’ -P “AND (‘Org1MSP.peer’,’Org2MSP.peer’)”
.
.
.
2018-02-22 18:26:31.433 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc
2018-02-22 18:26:31.434 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc
2018-02-22 18:26:31.435 UTC [chaincodeCmd] getChaincodeSpec -&gt; DEBU 005 java chaincode enabled
2018-02-22 18:26:31.435 UTC [chaincodeCmd] upgrade -&gt; DEBU 006 Get upgrade proposal for chaincode &lt;name:”mycc” version:”1.1” &gt;
.
.
.
2018-02-22 18:26:46.687 UTC [chaincodeCmd] upgrade -&gt; DEBU 009 endorse upgrade proposal, get response &lt;status:200 message:”OK” payload:”n004mycc0220031.1032004escc&quot;004vscc*,022014022n010001022002010000022002010001032r022013n007Org1MSP020003032r022013n007Org2MSP0200032fn 261g(^v021220240332251014204V210P310o231271036301022032205fC[<a href="#id143"><span class="problematic" id="id144">|</span></a>=215372223022 311b025?323N343325032005365236001XKj004E351007247265fu305j367331275253307R032 014H#014272!#345306s323371350364006.000356230353270263215217303256220i^277305214: 375200zY275203}375244205035340226]l!uE3342732142140203033474360014234-006315B031022010022006010001022002010000032r022013n007Org1MSP020001” &gt;
.
.
.
2018-02-22 18:26:46.693 UTC [chaincodeCmd] upgrade -&gt; DEBU 00c Get Signed envelope
2018-02-22 18:26:46.693 UTC [chaincodeCmd] chaincodeUpgrade -&gt; DEBU 00d Send signed envelope to orderer
2018-02-22 18:26:46.908 UTC [main] main -&gt; INFO 00e Exiting…..</p>
</dd>
</dl>
<p><a href="#id145"><span class="problematic" id="id146">``</span></a><a href="#id147"><span class="problematic" id="id148">`</span></a></p>
<blockquote>
<div><ul class="simple">
<li><p>不启用TLS，仅用命令专门选项来升级网络中的链码：</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt><a href="#id149"><span class="problematic" id="id150">``</span></a><a href="#id151"><span class="problematic" id="id152">`</span></a></dt><dd><p>peer chaincode upgrade -o orderer.example.com:7050 -C mychannel -n mycc -v 1.2 -c ‘{“Args”:[“init”,”a”,”100”,”b”,”200”,”c”,”300”]}’ -P “AND (‘Org1MSP.peer’,’Org2MSP.peer’)”
.
.
.
2018-02-22 18:28:31.433 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 003 Using default escc
2018-02-22 18:28:31.434 UTC [chaincodeCmd] checkChaincodeCmdParams -&gt; INFO 004 Using default vscc
2018-02-22 18:28:31.435 UTC [chaincodeCmd] getChaincodeSpec -&gt; DEBU 005 java chaincode enabled
2018-02-22 18:28:31.435 UTC [chaincodeCmd] upgrade -&gt; DEBU 006 Get upgrade proposal for chaincode &lt;name:”mycc” version:”1.1” &gt;
.
.
.
2018-02-22 18:28:46.687 UTC [chaincodeCmd] upgrade -&gt; DEBU 009 endorse upgrade proposal, get response &lt;status:200 message:”OK” payload:”n004mycc0220031.1032004escc&quot;004vscc*,022014022n010001022002010000022002010001032r022013n007Org1MSP020003032r022013n007Org2MSP0200032fn 261g(^v021220240332251014204V210P310o231271036301022032205fC[<a href="#id153"><span class="problematic" id="id154">|</span></a>=215372223022 311b025?323N343325032005365236001XKj004E351007247265fu305j367331275253307R032 014H#014272!#345306s323371350364006.000356230353270263215217303256220i^277305214: 375200zY275203}375244205035340226]l!uE3342732142140203033474360014234-006315B031022010022006010001022002010000032r022013n007Org1MSP020001” &gt;
.
.
.
2018-02-22 18:28:46.693 UTC [chaincodeCmd] upgrade -&gt; DEBU 00c Get Signed envelope
2018-02-22 18:28:46.693 UTC [chaincodeCmd] chaincodeUpgrade -&gt; DEBU 00d Send signed envelope to orderer
2018-02-22 18:28:46.908 UTC [main] main -&gt; INFO 00e Exiting…..</p>
</dd>
</dl>
<p><a href="#id155"><span class="problematic" id="id156">``</span></a><a href="#id157"><span class="problematic" id="id158">`</span></a></p>
</div></blockquote>
</li>
</ul>
<p>&lt;a rel=”license” href=”<a class="reference external" href="http://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</a>”&gt;&lt;img alt=”Creative Commons License” style=”border-width:0” src=”https://i.creativecommons.org/l/by/4.0/88x31.png” /&gt;&lt;/a&gt;&lt;br /&gt;This work is licensed under a &lt;a rel=”license” href=”http://creativecommons.org/licenses/by/4.0/”&gt;Creative Commons Attribution 4.0 International License&lt;/a&gt;.</p>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="peerlifecycle.html" class="btn btn-neutral float-right" title="&lt;no title&gt;" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="peercommand.html" class="btn btn-neutral" title="&lt;no title&gt;" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Hyperledger 2020.
    <br>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>