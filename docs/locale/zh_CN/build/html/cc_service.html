

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>} &mdash; hyperledger-fabricdocs master documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="错误处理" href="error-handling.html" />
    <link rel="prev" title="fi" href="cc_launcher.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          


          
            <a href="index.html" class="icon icon-home"> hyperledger-fabricdocs
          

          
          </a>

          
            
            
              <div class="version">
                master
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

<br><img style="background-color: #fff; height: unset; width: unset;" alt="Hyperledger Fabric" src=_images/hyperledger_fabric_logo_color.png />
<br>
<a href="https://github.com/hyperledger/fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="GitHub" src="_static/images/github_button.png"/></a>
&nbsp;<a href="https://stackoverflow.com/questions/tagged/hyperledger-fabric"><img style="padding: 0px; margin: auto auto auto auto;" alt="StackOverflow" src="_static/images/stackoverflow_button.png"/></a>
&nbsp;<a href="https://chat.hyperledger.org"><img style="padding: 0px; margin: auto auto auto auto;" alt="Rocket Chat" src="_static/images/rocketchat_button.png"/></a>
&nbsp;<a href="https://www.youtube.com/playlist?list=PL0MZ85B_96CH7wvtrRzV7SvtRY0sI0DEg"><img style="padding: 0px; margin: auto auto auto auto;" alt="Youtube Channel" src="_static/images/youtube_button.png"/></a>

        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html">Hyperledger Fabric v2.0 更新说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="whatsnew.html#id7">发行说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="key_concepts.html">关键概念</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">入门</a></li>
<li class="toctree-l1"><a class="reference internal" href="developapps/developing_applications.html">开发应用</a></li>
<li class="toctree-l1"><a class="reference internal" href="tutorials.html">教程</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment_guide_overview.html">部署一个生产网络</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="ops_guide.html">操作指南</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="msp.html">成员服务提供者 (MSP)</a></li>
<li class="toctree-l2"><a class="reference internal" href="hsm.html">```</a></li>
<li class="toctree-l2"><a class="reference internal" href="configtx.html">通道配置（configtx）</a></li>
<li class="toctree-l2"><a class="reference internal" href="endorsement-policies.html">背书策略</a></li>
<li class="toctree-l2"><a class="reference internal" href="pluggable_endorsement_and_validation.html">可插拔交易背书与交易验证</a></li>
<li class="toctree-l2"><a class="reference internal" href="access_control.html">},</a></li>
<li class="toctree-l2"><a class="reference internal" href="idemix.html">使用身份混合器（Identity Mixer）的 MSP 实现</a></li>
<li class="toctree-l2"><a class="reference internal" href="idemixgen.html">身份混合器（Identity Mixer） MSP 配置生成器（idemixgen）</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations_service.html">操作服务</a></li>
<li class="toctree-l2"><a class="reference internal" href="metrics_reference.html">Metrics Reference</a></li>
<li class="toctree-l2"><a class="reference internal" href="cc_launcher.html">fi</a></li>
<li class="toctree-l2"><a class="reference internal" href="cc_launcher.html#id17">fi</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">}</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id62">}</a></li>
<li class="toctree-l2"><a class="reference internal" href="error-handling.html">错误处理</a></li>
<li class="toctree-l2"><a class="reference internal" href="logging-control.html">日志控制</a></li>
<li class="toctree-l2"><a class="reference internal" href="enable_tls.html">使用 TLS（Transport Layer Security）保护通信</a></li>
<li class="toctree-l2"><a class="reference internal" href="kafka.html">启用基于 Kafka 的排序服务</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="upgrade.html">升级到最新版本</a></li>
<li class="toctree-l1"><a class="reference internal" href="command_ref.html">命令参考</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">架构参考</a></li>
<li class="toctree-l1"><a class="reference internal" href="Fabric-FAQ.html">常见问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="CONTRIBUTING.html">欢迎贡献！</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">术语表</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">版本发布</a></li>
<li class="toctree-l1"><a class="reference internal" href="questions.html">仍有问题？</a></li>
<li class="toctree-l1"><a class="reference internal" href="status.html">状态</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">hyperledger-fabricdocs</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="ops_guide.html">操作指南</a> &raquo;</li>
        
      <li>}</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/cc_service.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p># 将链码作为外部服务</p>
<p>Fabric v2.0支持将链码在Faric外部部署与执行以方便用户独立管理每个节点的代码运行环境。这有助于Kubernetes等Fabric云上部署链码。不再需要在每个节点构建和运行，链码现在可以作为一个服务运行，其生命周期在Fabric之外进行管理。此功能利用了Fabric v2.0外部构建器和启动器功能，使操作员能够通过程序扩展对等方来构建、启动和发现链码。在阅读本主题之前，您应该熟悉[外部构建器和启动器](./cc_launcher.html) 内容。</p>
<p>在外部构建器可用之前，链码包内容要求是一组特定语言的源代码文件，可以作为链码二进制文件构建和启动。新的外部构建和启动程序功能现在允许用户有选择地定制构建过程。为了将链码作为外部服务运行，构建过程允许您指定正在运行链码的服务器的端点信息。因此，该包只包含外部运行的链码服务器端点信息和用于安全连接的TLS构件。TLS是可选的，但强烈建议用于除简单测试环境以外的所有环境。</p>
<p>本主题的其余部分介绍如何将链码配置为外部服务：
* [打包链码](#packaging-chaincode)
* [设置一个节点来执行外部链码](#configuring-a-peer-to-process-external-chaincode)
* [外部构建器和启动器示例脚本](#external-builder-and-launcher-sample-scripts)
* [编写作为外部服务的链码](#writing-chaincode-to-run-as-an-external-service)
* [部署链码](#deploying-the-chaincode)
* [将链码作为外部服务执行](#running-the-chaincode-as-an-external-service)</p>
<p><strong>注意:</strong> 这是一个需要定制封装peer镜像的高级功能。例如，接下来的示例需要用到的`jq`和`bash`并不包含在当前的`fabric-peer`官方镜像中。</p>
<p>## 打包链码
在Fabricv2.0的链码生命周期中，链码是被[打包为](./cc_launcher.md#链码包)`.tar.gz`的格式并安装的。下述`myccpackage.tgz`文件将展示所需要的结构。</p>
<p><code class="docutils literal notranslate"><span class="pre">`sh</span>
<span class="pre">$</span> <span class="pre">tar</span> <span class="pre">xvfz</span> <span class="pre">myccpackage.tgz</span>
<span class="pre">metadata.json</span>
<span class="pre">code.tar.gz</span>
<span class="pre">`</span></code></p>
<p>链码包应向外部构建器和启动器进程提供两个信息
* 标记链码是否为外部服务。<cite>bin/detect</cite> 章节描述了使用`metadata.json`的要求。
* 在`connection.json` 中提供链码端点信息并放置在发布目录中。<cite>bin/run</cite> 章节描述了 <a href="#id1"><span class="problematic" id="id2">`</span></a>connection.json`文件。</p>
<p>收集上述信息可以有很多灵活的方法。[外部构建器和运行器示例脚本]示例脚本中展示了收集这些信息的简单方法。
作为一个灵活性的例子，考虑打包couchdb索引文件（参考[将索引添加至你的链码文件夹](couchdb_tutorial.html#add-the-index-to-your-chaincode-folder))。下列示例脚本展示了打包文件到 code.tar.gz的方法。</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">tar</span> <span class="pre">cfz</span> <span class="pre">code.tar.gz</span> <span class="pre">connection.json</span> <span class="pre">metadata</span>
<span class="pre">tar</span> <span class="pre">cfz</span> <span class="pre">$1-pkg.tgz</span> <span class="pre">metadata.json</span> <span class="pre">code.tar.gz</span>
<span class="pre">`</span></code></p>
<p>## 设置一个节点来执行外部链码</p>
<p>在本章节中文名将介绍所需的配置
* 检测链码是否被标记为外部链码服务
* 在发布目录中创建`connection.json`文件</p>
<p>### 修改 peer core.yaml文件以包含externalBuilder（外部构建器）</p>
<p>假设peer上的脚本被如下所示放置在`bin`文件夹下</p>
<dl>
<dt><a href="#id3"><span class="problematic" id="id4">``</span></a><a href="#id5"><span class="problematic" id="id6">`</span></a></dt><dd><p>&lt;fully qualified path on the peer’s env&gt;
└── bin</p>
<blockquote>
<div><p>├── build
├── detect
└── release</p>
</div></blockquote>
</dd>
</dl>
<p><a href="#id7"><span class="problematic" id="id8">``</span></a><a href="#id9"><span class="problematic" id="id10">`</span></a></p>
<p>修改peer的 <cite>core.yaml</cite> 中`chaincode`段落以包含`externalBuilders`（外部构建器）配置元素：</p>
<p><a href="#id11"><span class="problematic" id="id12">``</span></a><a href="#id13"><span class="problematic" id="id14">`</span></a>yaml
externalBuilders:</p>
<blockquote>
<div><ul class="simple">
<li><p>name: myexternal
path: &lt;fully qualified path on the peer’s env&gt;</p></li>
</ul>
</div></blockquote>
<p><a href="#id15"><span class="problematic" id="id16">``</span></a><a href="#id17"><span class="problematic" id="id18">`</span></a></p>
<p>### 外部构建器和启动器示例脚本</p>
<p>为了帮助理解外部服务链码需要包含的每个脚本，本章节包含`bin/detect` <cite>bin/build</cite>, <cite>bin/release</cite>, 和 <cite>bin/run</cite> 脚本。</p>
<p><strong>注意:</strong> 本示例使用了`jq`命令来分析json。你可以运行`jq –version`来检查你是否已安装。如果没有，则安装`jq`或适当调整脚本。</p>
<p>#### bin/detect</p>
<blockquote>
<div><p><cite>bin/detect script</cite> 负责确定是否应使用buildpack来生成链码包并启动它。对于作为外部服务的链码，示例脚本在`metadata.json`文件中设置`type`属性为`external`：</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">`json</span>
<span class="pre">{&quot;path&quot;:&quot;&quot;,&quot;type&quot;:&quot;external&quot;,&quot;label&quot;:&quot;mycc&quot;}</span>
<span class="pre">`</span></code></p>
<p>Peer调用detect需要两个参数:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">bin/detect</span> <span class="pre">CHAINCODE_SOURCE_DIR</span> <span class="pre">CHAINCODE_METADATA_DIR</span>
<span class="pre">`</span></code></p>
<p><a href="#id19"><span class="problematic" id="id20">`</span></a>bin/detect`示例脚本包含：</p>
<p><a href="#id21"><span class="problematic" id="id22">``</span></a><a href="#id23"><span class="problematic" id="id24">`</span></a>sh</p>
<p>#!/bin/bash</p>
<p>set -euo pipefail</p>
<p>METADIR=$2
#check if the “type” field is set to “external”
if [ “$(jq -r .type “$METADIR/metadata.json”)” == “external” ]; then</p>
<blockquote>
<div><p>exit 0</p>
</div></blockquote>
<p>fi</p>
<p>exit 1</p>
<p><a href="#id25"><span class="problematic" id="id26">``</span></a><a href="#id27"><span class="problematic" id="id28">`</span></a></p>
<p>#### bin/build</p>
<p>作为一个外部服务的链码，示例构建脚本假设链码包`code.tar.gz` 的文件内的`connection.json`仅简单复制`BUILD_OUTPUT_DIR`。节点需要三个参数调用构建脚本:</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">bin/build</span> <span class="pre">CHAINCODE_SOURCE_DIR</span> <span class="pre">CHAINCODE_METADATA_DIR</span> <span class="pre">BUILD_OUTPUT_DIR</span>
<span class="pre">`</span></code></p>
<p><a href="#id29"><span class="problematic" id="id30">`</span></a>bin/build`示例脚本包含：</p>
<p><a href="#id31"><span class="problematic" id="id32">``</span></a><a href="#id33"><span class="problematic" id="id34">`</span></a>sh</p>
<p>#!/bin/bash</p>
<p>set -euo pipefail</p>
<p>SOURCE=$1
OUTPUT=$3</p>
<p>#external chaincodes expect connection.json file in the chaincode package
if [ ! -f “$SOURCE/connection.json” ]; then</p>
<blockquote>
<div><p>&gt;&amp;2 echo “$SOURCE/connection.json not found”
exit 1</p>
</div></blockquote>
<p>fi</p>
<p>#simply copy the endpoint information to specified output location
cp $SOURCE/connection.json $OUTPUT/connection.json</p>
<dl class="simple">
<dt>if [ -d “$SOURCE/metadata” ]; then</dt><dd><p>cp -a $SOURCE/metadata $OUTPUT/metadata</p>
</dd>
</dl>
<p>fi</p>
<p>exit 0</p>
<p><a href="#id35"><span class="problematic" id="id36">``</span></a><a href="#id37"><span class="problematic" id="id38">`</span></a></p>
<p>#### bin/release</p>
<p>作为外部服务的链码，<cite>bin/release`脚本负责将 `connection.json`放置在`RELEASE_OUTPUT_DIR`以提供给peer。`connection.json</cite> 文件包含下列JSON结构</p>
<ul class="simple">
<li><p><strong>address</strong> - 可供peer访问的链码服务端点. 必须写为 “&lt;host&gt;:&lt;port&gt;” 格式.</p></li>
<li><p><strong>dial_timeout</strong> - 等待连接完成的间隔。指定为带有时间单位的字符串（例如，“10s”、“500ms”、“1m”）。如果未指定，默认值为“3s”。</p></li>
<li><p><strong>tls_required</strong> - true 或 false. 如果为 false, “client_auth_required”, “client_key”, “client_cert” 和 “root_cert” 则不需要填写. 默认 “true”.</p></li>
<li><p><strong>client_auth_required</strong> - 如果为 true, “client_key” and “client_cert” 需要填写. 默认 false. 它将忽略 tls_required 为 false.</p></li>
<li><p><strong>client_key</strong> - 客户端的私钥PEM 加密字串。</p></li>
<li><p><strong>client_cert</strong>  - 客户端的PEM加密证书字串。</p></li>
<li><p><strong>root_cert</strong>  - 服务器（peer）根节点证书的PEM加密字串。</p></li>
</ul>
<p>例如：</p>
<p><a href="#id39"><span class="problematic" id="id40">``</span></a><a href="#id41"><span class="problematic" id="id42">`</span></a>json
{</p>
<blockquote>
<div><p>“address”: “your.chaincode.host.com:9999”,
“dial_timeout”: “10s”,
“tls_required”: “true”,
“client_auth_required”: “true”,
“client_key”: “—–BEGIN EC PRIVATE KEY—– … —–END EC PRIVATE KEY—–”,
“client_cert”: “—–BEGIN CERTIFICATE—– … —–END CERTIFICATE—–”,
“root_cert”: “—–BEGIN CERTIFICATE—- … —–END CERTIFICATE—–”</p>
</div></blockquote>
<div class="section" id="id43">
<h1>}<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h1>
<p>如 <cite>bin/build`章节提示的，本示例假设链码包的`connection.json`文件直接复制到`BUILD_OUTPUT_DIR</cite>。节点使用两个参数调用发布脚本：</p>
<p><code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">bin/release</span> <span class="pre">BUILD_OUTPUT_DIR</span> <span class="pre">RELEASE_OUTPUT_DIR</span>
<span class="pre">`</span></code></p>
<p><a href="#id44"><span class="problematic" id="id45">`</span></a>bin/release`示例脚本包含：</p>
<p><a href="#id46"><span class="problematic" id="id47">``</span></a><a href="#id48"><span class="problematic" id="id49">`</span></a>sh</p>
<p>#!/bin/bash</p>
<p>set -euo pipefail</p>
<p>BLD=”$1”
RELEASE=”$2”</p>
<dl class="simple">
<dt>if [ -d “$BLD/metadata” ]; then</dt><dd><p>cp -a “$BLD/metadata/”* “$RELEASE/”</p>
</dd>
</dl>
<p>fi</p>
<p>#external chaincodes expect artifacts to be placed under “$RELEASE”/chaincode/server
if [ -f $BLD/connection.json ]; then</p>
<blockquote>
<div><p>mkdir -p “$RELEASE”/chaincode/server
cp $BLD/connection.json “$RELEASE”/chaincode/server</p>
<p>#if tls_required is true, copy TLS files (using above example, the fully qualified path for these fils would be “$RELEASE”/chaincode/server/tls)</p>
<p>exit 0</p>
</div></blockquote>
<p>fi</p>
<p>exit 1
<a href="#id50"><span class="problematic" id="id51">``</span></a><a href="#id52"><span class="problematic" id="id53">`</span></a></p>
<p>## 编写作为外部服务的链码</p>
<p>当前，外部服务模式的链码仅支持 GO chaincode shim.在Fabric v2.0中，GO shim API添加了`ChaincodeServer` 类型使开发者可以使用它来创建一个链码服务。<cite>Invoke</cite> and <cite>Query</cite> APIs 不受影响。开发者应将其写入`shim.ChaincodeServer` API,然后构建链码并运行在选择的外部环境中。下面是一个简单的链码程序示例来说明这个模式:</p>
<p><a href="#id54"><span class="problematic" id="id55">``</span></a><a href="#id56"><span class="problematic" id="id57">`</span></a>go</p>
<p>package main</p>
<dl>
<dt>import (</dt><dd><p>“fmt”</p>
<p>“github.com/hyperledger/fabric-chaincode-go/shim”
pb “github.com/hyperledger/fabric-protos-go/peer”</p>
</dd>
</dl>
<p>)</p>
<p>// SimpleChaincode example simple Chaincode implementation
type SimpleChaincode struct {
}</p>
<dl class="simple">
<dt>func (s <a href="#id58"><span class="problematic" id="id59">*</span></a>SimpleChaincode) Init(stub shim.ChaincodeStubInterface) pb.Response {</dt><dd><p>// init code</p>
</dd>
</dl>
<p>}</p>
<dl class="simple">
<dt>func (s <a href="#id60"><span class="problematic" id="id61">*</span></a>SimpleChaincode) Invoke(stub shim.ChaincodeStubInterface) pb.Response {</dt><dd><p>// invoke code</p>
</dd>
</dl>
<p>}</p>
<p>//NOTE - parameters such as ccid and endpoint information are hard coded here for illustration. This can be passed in in a variety of standard ways
func main() {</p>
<blockquote>
<div><dl>
<dt>//The ccid is assigned to the chaincode on install (using the “peer lifecycle chaincode install &lt;package&gt;” command) for instance</dt><dd><p>ccid := “mycc:fcbf8724572d42e859a7dd9a7cd8e2efb84058292017df6e3d89178b64e6c831”</p>
<dl>
<dt>server := &amp;shim.ChaincodeServer{</dt><dd><blockquote>
<div><p>CCID: ccid,
Address: “myhost:9999”
CC: new(SimpleChaincode),
TLSProps: shim.TLSProperties{</p>
<blockquote>
<div><p>Disabled: true,</p>
</div></blockquote>
<p>},</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
<p>err := server.Start()
if err != nil {</p>
<blockquote>
<div><p>fmt.Printf(“Error starting Simple chaincode: %s”, err)</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
</div></blockquote>
</div>
<div class="section" id="id62">
<h1>}<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h1>
<p>使用`shim.ChaincodeServer`是将链码作为外部服务的关键。新的shim API <a href="#id63"><span class="problematic" id="id64">`</span></a>shim.ChaincodeServer`服务配置参数的作用如下：</p>
<ul class="simple">
<li><p><strong>CCID</strong> (string)- CCID 应匹配peer节点上链码的包名.这是`CCID`关联链码并使用 <cite>peer lifecycle chaincode install &lt;package&gt;</cite> 命令获取返回值。这可以在安装后使用`peer lifecycle chaincode queryinstalled`命令获得。</p></li>
<li><p><strong>Address</strong> (string) - 是链码服务的监听地址</p></li>
<li><p><strong>CC</strong> (Chaincode) -  CC 是初始化（Init）和调用（Invoke）的链码。</p></li>
<li><p><strong>TLSProps</strong> (TLSProperties) - TLSProps 是发送给链码服务的TLS属性</p></li>
<li><p><strong>KaOpts</strong> (keepalive.ServerParameters) -  KaOpts keepalive 属性, 如果为空，则提供合理的默认值</p></li>
</ul>
<p>然后构建适合您的GO环境的链码</p>
<p>## 部署链码</p>
<p>当GO链码可以被部署时，你可以如[打包链码](#packaging-chaincode) 章节描述的一样打包，并按照[Fabric 链码生命周期](./chaincode_lifecycle.html) 中说明的进行部署。</p>
<p>## 将链码作为外部服务运行</p>
<p>如[编写外部服务链码](#writing-chaincode-to-run-as-an-external-service)章节描述的创建链码。在您选择的环境中运行构建可执行文件，如Kubernetes或直接在 peer 机器上作为一个进程运行。</p>
<p>以外部服务模式使用链码便不需要再每个节点上安装链码。当链码端点部署并替换运行后，你依然能执行提交通道上定义的链码和调用链码。</p>
<p>&lt;!—
Licensed under Creative Commons Attribution 4.0 International License <a class="reference external" href="https://creativecommons.org/licenses/by/4.0/">https://creativecommons.org/licenses/by/4.0/</a>
–&gt;</p>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="error-handling.html" class="btn btn-neutral float-right" title="错误处理" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="cc_launcher.html" class="btn btn-neutral" title="fi" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright Hyperledger 2020.
    <br>
      <br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>
      <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">
        <img alt="Creative Commons License" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>